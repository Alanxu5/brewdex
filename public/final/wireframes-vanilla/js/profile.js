function uploadImage(a,b){b.put(a).then(function(a){console.log("Uploaded a blob or file!"),downloadProfilePic()}).catch(function(a){alert(a.message)})}function downloadImage(a,b){b.getDownloadURL().then(function(b){var c=$(a)[0];console.log(a),c.src=b,console.log(b)}).catch(function(a){})}function uploadProfilePic(){var a=firebase.storage(),b=a.ref().child("profilePics"),c=firebase.auth().currentUser.uid,d=b.child(c),e=$("#profileUpload")[0].files[0];console.log(e),uploadImage(e,d)}function downloadProfilePic(){var a=firebase.storage(),b=a.ref().child("profilePics"),c=firebase.auth().currentUser.uid,d=b.child(c);downloadImage("#profilePic",d)}function updateBio(){var a=firebase.auth().currentUser.uid;return text=$("#bioText").val(),null==text||text.length<1?void alert("Enter a bio first"):(firebase.database().ref("userBio/").child(a).set({bio:text}),void displayBio(text))}function readBio(){var a=firebase.auth().currentUser.uid,b=firebase.database().ref("/userBio/").child(a);return b.once("value").then(function(a){displayBio(a.val()?a.val().bio:"Add a bio here!")})}function deleteBio(){var a=firebase.auth().currentUser.uid,b=firebase.database().ref("/userBio/").child(a);b.remove().then(function(){displayBio("Add a bio!"),alert("Successfully updated bio!"),console.log("Remove succeeded.")}).catch(function(a){console.log("Remove failed: "+a.message)})}function displayBio(a){console.log(a),$("#bioText").val(a)}function getCredentials(a){const b=firebase.auth().currentUser;return credential=firebase.auth.EmailAuthProvider.credential(b.email,a)}function validatePassword(a,b){return a.length<5?($("#registerPassword").animate({border:"2px red"},"fast"),"Password must be greater than 5 characters\n"):a!=b?($("#registerPassword2").animate({border:"2px red"},"fast"),"Passwords do not match\n"):""}function validateEmail(a){return""}function updateName(){var a=prompt("Enter a new name","ex: John Doe");null==a||a.length>0?(user=firebase.auth().currentUser,user.updateProfile({displayName:a}).then(function(){alert("Username sucessfully changed to: "+user.displayName),$("#name").html(user.displayName),firebase.database().ref("displayName/").child(user.uid).set({displayName:user.displayName})},function(a){alert(a.message)})):alert("User name not changed")}function updateInfo(){const a=$("#newPassword").val(),b=$("#newPassword2").val(),c=$("#newEmail").val(),d=$("#currentPassword").val();var e=validatePassword(d,d);if(""!=e)return void alert(e);const f=getCredentials(d);return a.length>0&&(e=validatePassword(a,b)),c.length>0&&(e+=validateEmail(c)),""!=e?void alert(e):void firebase.auth().currentUser.reauthenticate(f).then(function(){console.log(a),a.length>0&&firebase.auth().currentUser.updatePassword(a).then(function(){firebase.auth().signInWithEmailAndPassword(firebase.auth().currentUser.email,a).catch(function(a){console.log(a),alert(a)}),alert("Changed Password!")}).catch(function(a){console.log(a),alert(a)})}).then(function(){c.length>0&&(firebase.auth().currentUser.updateEmail(c),alert("Changed Email!"),$("email").text(user.email))}).catch(function(a){console.log(a),alert(a)})}
